
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Mass Transit &amp; Inequality in the Bay Area</title>
   
    <link href="../assets/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 20px;
        padding-bottom: 40px;
      }

      /* Custom container */
      .container-narrow {
        margin: 0 auto;
        max-width: 900px;
      }
      .container-narrow > hr {
        margin: 30px 0;
      }

    </style>
    <link href="./assets/css/bootstrap.css" rel="stylesheet">

 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script lang="text/javascript">
var all_agency_data = [];

$(document).ready(function(){
  data_paths = ["data/BART.json", "data/CalTrain.json"];

  // Load the data for each agency
  $(data_paths).each(function(i, path){
    $.getJSON(path, function(data){
      all_agency_data.push(data);
      if(all_agency_data.length == data_paths.length) display_choices();
    });
  });
});

function display_choices(){
  console.log("choices = %o", all_agency_data);

  $(all_agency_data).each(function(i, agency){
    $("#choices").append("<dt>"+agency.agency_name+"</dt>");
    dd = $("#choices").append($('<dd/>'));
    route_list = $('<ul/>');
    dd.append(route_list);
    route_list.attr('class','nav nav-pills');
    
    $.each(agency.routes, function(route_id, route_info){
      li = $("<li/>");
      link = $("<a href=\"#\">"+route_info.name+"</a>");
      li.append(link);
      route_list.append(li);
      link.click(function(event){display_route(agency.agency_name, route_info.name);});
    });
  });
}


function display_route(agency_name, route_id){
  alert("showing route "+route_id+" for agency "+agency_name);
}

</script>
  </head>

  <body>

    <div class="container-narrow">

      <div class="masthead">
        <h2>Mass Transit &amp; Inequality in the Bay Area</h2>
      </div>

      <hr>

      <div class="span12">
        <h4>Choose a Line</h4>
        <dl id="choices">
        </dl>

      </div>

      <hr>


      <div class="footer">
        <p>by @dangrover and @michaelbelfrage</p>
      </div>

    </div> <!-- /container -->


  </body>
</html>
